(function(){const a={name:"miTem",version:"1.0.6"},b={statement:/\{%([\s\S]+?)%\}/g,expression:/\{\{([\s\S]+?)\}\}/g,filter_param:/([\s\S]+?)(\(([^)]*)\))$/};a.partials={},a.registerPartial=(b,c)=>{a.partials[b]="string"==typeof c?a.compile(c):c};const c={partial:(...a)=>`o+=m.partials['${a[1]}'].apply(null, [${"undefined"==typeof a[2]?"c":`c.${a[2]}`}]);`,if:(...a)=>`if(c.${a[1]}){`,else:(...a)=>`}else ${"if"===a[1]?c.if("",a[2]):"{"}`,endif:()=>"}",endfor:()=>"}c=c.loop.parent;",for:(...a)=>{const b=`if (typeof c.${a[3]}=== 'undefined') return '';
      var t={loop:{parent:c,length:c.${a[3]}.length}};c=t;var i=0;
      if(typeof c.loop.parent.${a[3]}.length === 'undefined')
      {c.loop.length=m.objSize(c.loop.parent.${a[3]})}
      for(${a[1]} in c.loop.parent.${a[3]}){
      if (!c.loop.parent.${a[3]}.hasOwnProperty(${a[1]}))continue;
      c.${a[1]}=c.loop.parent.${a[3]}[${a[1]}];
      c.loop.last=(i===c.loop.length-1);
      c.loop.first=(i===0);
      c.loop.key=${a[1]};
      c.loop.index0=i; c.loop.index=i+1;i++;`;return b}};a.variable=function(a){this.val=a},a.variable.prototype.applyFilter=function(b,c){let d;if("undefined"!=typeof a.filters[b])d=a.filters[b].apply(this.val,c);else if("undefined"==typeof this.val[b])throw new Error(`Filter ${b} is not defined`);else d=this.val[b].apply(this.val,c);return this.val=d,this},a.variable.prototype.toString=function(){return this.val},a.objSize=a=>{const b=Object.keys(a);return b.length},a.retoreDefaultSettings=function(){a.settings={stopOnError:!1}},a.retoreDefaultSettings(),a.filters={default(a){'use strict';return"undefined"==typeof this?a:this},abs(){return Math.abs(this)},capitalize(){return this.charAt(0).toUpperCase()+this.slice(1)},nl2br(){return this.replace(/\n/gi,"<br />")},title(){return this.split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()).join(" ")}},"undefined"!=typeof module&&module.exports?module.exports=a:"function"==typeof define&&define.amd?define(()=>a):window.miTem=a,a.processFilters=a=>{const c=a.trim().split("|");let d=`(new m.variable(c.${c[0]}))`;const e=c.slice(1);let f;return e.forEach(a=>{f=b.filter_param.exec(a.trim())||["",a.trim(),"",""];const c=f[3].split(",");d+=`.applyFilter('${f[1]}', [${c.join(",")}])`}),d+=".toString()",d},a.compile=d=>{let f="var c=d;var m=this.miTem;var o='";const g=d.split("\n");let h,j,k="",l=!0;const m=function(...a){const b=a[1].trim().split(" ");let d="';";return"undefined"==typeof c[b[0]]?(console.error(`Line: ${h}; Error in ${a[0]}; Unknown tag '${b[0]}'`),l=!1):d+=c[b[0]].apply(null,b),d+="o+='",d},n=function(...b){const c=b[1];let d=a.processFilters(c.replace(/\\'/gi,"'"));return d=`(function(){var s=this,t;s.m=m;try{return ${d}}catch(e){console.error('Line: ${parseInt(h,10)+1}; Error in ${b[0]}');`,a.settings.stopOnError&&(d+="throw e;"),d+="}})()",`'+${d}+'`};return g.forEach((a,c)=>{h=c,j=a,f+=k;const d=j.replace(/'/gi,"\\'");f+=d.replace(b.statement,m).replace(b.expression,n),k="'+\"\\n\"+'"}),f+="'; return o;",l?b=>{let c;try{c=new Function("d",f)}catch(a){console.error(f),console.error(a)}return c.apply({miTem:a},[b])}:()=>""}})();